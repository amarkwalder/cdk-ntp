version: '1.0'
steps:
  build-cdk-ntp:
    type: build
    description: Build cdk-ntp 
    dockerfile: Dockerfile
    image-name: amarkwalder/cdk-ntp
    tag: ${{CF_BRANCH_NAME}}
 
  push-dockerhub:
    type: push
    description: Push to hub.docker.com - cdk-ntp:${{CF_BRANCH_NAME}}
    candidate: ${{build-cdk-ntp}}
    tag: ${{CF_BRANCH_NAME}}
    credentials:
      username: ${{username}}
      password: ${{password}}
    fail-fast: false

  push-dockerhub-latest:
    type: push
    description: Push to hub.docker.com - cdk-ntp:latest
    candidate: ${{build-cdk-ntp}}
    tag: latest 
    credentials:
      username: ${{username}}
      password: ${{password}}
    fail-fast: false
