version: '1.0'
steps:
  build:
    type: build
    description: Build amarkwalder/cdk-ntp
    dockerfile: Dockerfile
    image-name: amarkwalder/cdk-ntp 
    tag: ${{CF_BRANCH}}
 
  push-dockerhub:
    type: push
    description: Push to hub.docker.com - amarkwalder/cdk-ntp:${{CF_BRANCH}}
    candidate: ${{build}}
    tag: ${{CF_BRANCH}}
    credentials:
      username: ${{username}}
      password: ${{password}}
    fail-fast: false

  push-dockerhub-latest:
    type: push
    description: Push to hub.docker.com - amarkwalder/cdk-ntp:latest
    candidate: ${{build}}
    tag: latest 
    credentials:
      username: ${{username}}
      password: ${{password}}
    fail-fast: false
